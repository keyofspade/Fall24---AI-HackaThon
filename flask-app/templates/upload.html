<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aegis Defense: Data Privacy & Compliance Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="../static/static.css"/> <!-- Corrected the attribute syntax -->
</head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aegis Defense</title>
</head>
<body>

    <header>
        <h1>Aegis Scan: Data Privacy & Compliance Dashboard</h1>
        <p>This dashboard helps you upload files, view detected sensitive data, and review compliance recommendations for regulatory standards like GDPR and HIPAA.</p>
        <button onclick="speakText()" aria-label="Activate text-to-speech for overview">ðŸ”Š Hear Overview</button>
    </header>

    <main class="container">
        <img src="../static/AegisScanLogoCrop.webp" class="logo"/>
        <section class="project-description">
            <h2>Project Overview</h2>
            <p>
                Welcome to the Aegis Scan App! This project is designed to help organizations monitor and manage their data privacy and compliance efforts effectively. By providing a centralized interface, users can easily upload, analyze, and visualize their data privacy metrics, ensuring adherence to relevant regulations and best practices. Our goal is to empower businesses to safeguard sensitive information while maintaining transparency and accountability.
            </p>
        </section>
        
        <section class="usage-instructions">
            <h2>How to Use the Dashboard</h2>
            <p>
                Getting started with the Data Privacy & Compliance Dashboard is simple. Follow these steps:
            </p>
            <ol>
                <li>
                    <strong>Upload Data Files:</strong> Click on the "Upload" button to select and upload your data files. Supported formats include .txt and .csv.
                </li>
                <li>
                    <strong>Analyze Data:</strong> Once uploaded, the dashboard will automatically analyze the data and display key metrics and insights.
                </li>
                <li>
                    <strong>Visualize Results:</strong> Explore the visualizations provided to gain a better understanding of your data privacy status and compliance levels.
                </li>
                <li>
                    <strong>Generate Reports:</strong> Use the reporting feature to generate summaries and detailed reports for stakeholders.
                </li>
            </ol>
            <p>
                If you have any questions or need further assistance, please refer to the help section or contact our support team.
            </p>
        </section>
        
        <section class="upload-section">
            <h2 class="section-title">Upload Your File</h2>
            <p>Upload .txt files to be scanned and logged for sensitive data.</p>
            <input type="file" id="fileInput" accept=".txt" onchange="displayFileName()" />
            <label for="fileInput">Choose File</label>
            <p id="fileName"></p>
            <button onclick="uploadFile()">Upload</button>
            <p id="uploadStatus"></p>
        </section>
    </main>

    <footer class="footer">
        &copy; 2024 Data Privacy Project | Compliant with GDPR & HIPAA Standards
    </footer>

    <script>
        // Display the selected file name
        function displayFileName() {
            const fileInput = document.getElementById('fileInput');
            const fileNameDisplay = document.getElementById('fileName');
            if (fileInput.files.length > 0) {
                fileNameDisplay.innerText = `Selected file: ${fileInput.files[0].name}`;
            } else {
                fileNameDisplay.innerText = '';
            }
        }

        // Upload the file to the server
        async function uploadFile() {
            const fileInput = document.getElementById('fileInput');
            const uploadStatus = document.getElementById('uploadStatus');

            if (fileInput.files.length === 0) {
                uploadStatus.innerText = "Please select a file.";
                return;
            }

            const formData = new FormData();
            formData.append('file', fileInput.files[0]);

            try {
                uploadStatus.innerText = "Uploading...";

                const response = await fetch('/upload', {
                    method: 'POST',
                    body: formData
                });

                if (response.ok) {
                    uploadStatus.innerText = "File uploaded successfully.";
                } else {
                    const errorData = await response.json();
                    uploadStatus.innerText = `Upload failed: ${errorData.error}`;
                }
            } catch (error) {
                console.error("Error uploading file:", error);
                const responseText = await response.text(); // Get the response text
                console.error("Server response:", responseText); // Log the server response
                uploadStatus.innerText = "Error uploading file.";
            }

        }
    </script>

</body>
</html>
